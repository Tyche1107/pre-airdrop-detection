<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pre-Airdrop Sybil Detection</title>
<style>
  :root {
    --bg:#0f1117;--bg2:#1a202c;--bg3:#2d3748;
    --border:#2d3748;--border2:#4a5568;
    --text:#e2e8f0;--text2:#cbd5e0;--text3:#94a3b8;--text4:#718096;
    --purple:#a78bfa;--green:#68d391;--red:#fc8181;--yellow:#f6e05e;
  }
  [data-theme="light"] {
    --bg:#f7fafc;--bg2:#edf2f7;--bg3:#e2e8f0;
    --border:#e2e8f0;--border2:#cbd5e0;
    --text:#1a202c;--text2:#2d3748;--text3:#4a5568;--text4:#718096;
    --purple:#6b46c1;--green:#276749;--red:#c53030;--yellow:#b7791f;
  }
  *{box-sizing:border-box;}
  body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);padding:20px 28px;line-height:1.6;margin:0;}
  h1{font-size:18px;color:var(--purple);margin-bottom:12px;border-bottom:1px solid var(--border);padding-bottom:8px;}
  .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:14px;}
  .controls input{background:var(--bg2);border:1px solid var(--border2);color:var(--text);padding:5px 12px;border-radius:5px;font-size:13px;width:200px;outline:none;}
  .controls input:focus{border-color:var(--purple);}
  .btn{background:var(--bg2);border:1px solid var(--border2);color:var(--text3);padding:5px 12px;border-radius:5px;cursor:pointer;font-size:12px;}
  .btn:hover{background:var(--bg3);}
  .cols{display:flex;gap:18px;}
  .col-exp{flex:3;min-width:0;}
  .col-paper{flex:1.3;min-width:220px;}
  .col-paper h2{font-size:11px;color:var(--text4);text-transform:uppercase;letter-spacing:.5px;margin:0 0 8px;font-weight:600;}
  .ps{background:var(--bg2);border:1px solid var(--border);border-radius:7px;padding:8px 12px;margin-bottom:7px;}
  .ps-title{font-size:12.5px;font-weight:700;color:var(--purple);margin-bottom:3px;}
  .ps-body{font-size:12px;color:var(--text3);}
  .ps-pills{margin-top:4px;display:flex;flex-wrap:wrap;gap:3px;}
  .pill{font-size:11px;background:var(--bg3);color:var(--text4);border-radius:3px;padding:1px 6px;}
  details{margin:3px 0;border-left:2px solid var(--border2);padding-left:12px;}
  details[open]>summary{color:var(--purple);}
  summary{cursor:pointer;padding:5px 6px;border-radius:5px;font-weight:600;color:var(--text2);list-style:none;display:flex;align-items:center;gap:7px;font-size:13px;user-select:none;}
  summary::-webkit-details-marker{display:none;}
  summary:hover{background:var(--bg2);}
  summary::before{content:'';width:7px;height:7px;border:1.5px solid var(--text4);border-radius:1px;flex-shrink:0;transform:rotate(45deg);transition:transform .15s;}
  details[open]>summary::before{transform:rotate(135deg);border-color:var(--purple);}
  .body{padding:4px 4px 8px 20px;font-size:12.5px;color:var(--text3);}
  .tag{font-size:11px;background:var(--bg3);color:var(--text4);border-radius:3px;padding:1px 6px;font-weight:normal;margin-left:4px;}
  .tag.done{background:#1a3a1a;color:var(--green);}
  .tag.wip{background:#3a2a00;color:var(--yellow);}
  table{border-collapse:collapse;margin:6px 0;font-size:12px;width:100%;max-width:640px;}
  th{color:var(--purple);text-align:left;padding:3px 12px 3px 0;border-bottom:1px solid var(--border);font-size:11px;font-weight:600;}
  td{padding:3px 12px 3px 0;color:var(--text2);border-bottom:1px solid var(--border);}
  td.hi{color:var(--green);font-weight:600;}
  td.lo{color:var(--red);}
  td.mid{color:var(--yellow);}
  .find{background:var(--bg2);border-left:3px solid var(--green);padding:6px 12px;border-radius:0 5px 5px 0;margin:6px 0;font-size:12px;color:var(--text);}
  .warn{border-left-color:var(--red);}
  .note{border-left-color:var(--yellow);}
  img.plot{width:100%;max-width:760px;border-radius:6px;margin:8px 0 3px;border:1px solid var(--border);cursor:zoom-in;display:block;}
  .q{color:var(--yellow);}
  .lightbox{display:none;position:fixed;inset:0;background:rgba(0,0,0,.88);z-index:1000;align-items:center;justify-content:center;cursor:zoom-out;}
  .lightbox.open{display:flex;}
  .lightbox img{max-width:92vw;max-height:92vh;border-radius:8px;}
  @media(max-width:800px){.cols{flex-direction:column;}.col-paper{display:none;}}
</style>
</head>
<body>

<h1>Pre-Airdrop Sybil Detection</h1>

<div class="controls">
  <input type="text" placeholder="搜索..." oninput="doSearch(this.value)">
  <button class="btn" onclick="setAll(true)">全部展开</button>
  <button class="btn" onclick="setAll(false)">全部折叠</button>
  <button class="btn" onclick="toggleTheme()">亮 / 暗</button>
</div>

<div class="cols">
<div class="col-exp">

<details open>
<summary class="q">ARTEMIS 事后检测，空投结束才能识别。能事前做吗？</summary>
<div class="body">ARTEMIS (WWW'24) 用事后完整数据识别 sybil，AUC 0.803。我们在空投前用纯行为特征做预警。</div>

  <details open>
  <summary>[01] 特征构建 <span class="tag done">Done</span></summary>
  <div class="body">从 TXS2（3.2M NFT 交易，251K 地址）提取 18 个行为特征，按 T-7/14/30/60/90 截断，模拟真实预警场景。</div>
  </details>

  <details open>
  <summary>[02] LightGBM 基准 — T-30 AUC 0.905 vs ARTEMIS 0.803 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>模型</th><th>数据</th><th>AUC</th></tr>
      <tr><td>ARTEMIS (论文)</td><td>事后</td><td class="lo">0.803</td></tr>
      <tr><td>LightGBM T-30（本文）</td><td>事前 30d</td><td class="hi">0.905</td></tr>
      <tr><td>LightGBM T-90（本文）</td><td>事前 90d</td><td class="hi">0.902</td></tr>
      <tr><td>ArtemisNet GNN（复现，事后）</td><td>事后</td><td>0.976</td></tr>
      <tr><td>ArtemisNet GNN（T-30）</td><td>事前 30d</td><td class="lo">0.586</td></tr>
    </table>
    <div class="find">简单模型 + 事前数据，超过复杂 GNN + 事后数据。</div>
    <img class="plot" src="data/model_comparison_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

</details>

<details>
<summary class="q">能提前多久识别？</summary>

  <details>
  <summary>[03] 时间消融 T-0 到 T-90 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>窗口</th><th>AUC</th><th>F1</th></tr>
      <tr><td>T-0（空投当天）</td><td class="hi">0.908</td><td>0.682</td></tr>
      <tr><td>T-30</td><td class="hi">0.905</td><td>0.683</td></tr>
      <tr><td>T-60</td><td class="hi">0.904</td><td>0.683</td></tr>
      <tr><td>T-90</td><td class="hi">0.902</td><td>0.684</td></tr>
    </table>
    <div class="find">T-0 到 T-90 AUC 只降 0.006，曲线极其平坦。</div>
    <img class="plot" src="data/temporal_ablation_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[12] 扩展消融 T-120 到 T-180 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>窗口</th><th>AUC</th></tr>
      <tr><td>T-120</td><td class="hi">0.899</td></tr>
      <tr><td>T-150</td><td class="hi">0.898</td></tr>
      <tr><td>T-180</td><td class="hi">0.895</td></tr>
    </table>
    <img class="plot" src="data/temporal_ablation_extended_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

</details>

<details>
<summary class="q">哪些特征在起作用？</summary>

  <details>
  <summary>[04] 特征重要性跨时间窗 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>特征</th><th>T-0</th><th>T-30</th><th>T-90</th></tr>
      <tr><td>buy_collections (NFT多样性)</td><td class="hi">48%</td><td>44%</td><td>38%</td></tr>
      <tr><td>unique_interactions</td><td>7%</td><td>14%</td><td class="hi">22%</td></tr>
      <tr><td>buy_value</td><td>12%</td><td>12%</td><td>12%</td></tr>
    </table>
    <div class="find">NFT多样性稳定第一；越早期 unique_interactions 权重越高。</div>
    <img class="plot" src="data/feature_stability_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[10] SHAP 分析 <span class="tag done">Done</span></summary>
  <div class="body">
    <img class="plot" src="data/shap_beeswarm.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[19] SHAP 跨时间窗对比 <span class="tag done">Done</span></summary>
  <div class="body">
    <div class="find">T-90 时 wallet_age_days 权重升高（新注册批量号）；T-7 时 recent_activity 权重升高（冲刺刷单）。</div>
    <img class="plot" src="data/shap_temporal_comparison.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[06] 特征组消融 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>特征组</th><th>AUC（仅此组）</th></tr>
      <tr><td>Activity</td><td class="hi">0.863</td></tr>
      <tr><td>Diversity</td><td class="hi">0.854</td></tr>
      <tr><td>Behavioral</td><td>0.848</td></tr>
      <tr><td>Volume</td><td>0.846</td></tr>
      <tr><td>DeFi (Blend)</td><td class="lo">0.544</td></tr>
    </table>
    <div class="warn find">DeFi 特征无效：sybil 主要靠 NFT 交易刷积分，不靠 Blend。</div>
    <img class="plot" src="data/ablation_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

</details>

<details>
<summary class="q">加图信息会更好吗？</summary>

  <details>
  <summary>[07] 图特征增强 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>实验</th><th>AUC</th></tr>
      <tr><td>行为特征</td><td class="hi">0.904</td></tr>
      <tr><td>图特征</td><td>0.873</td></tr>
      <tr><td>行为 + 图</td><td class="hi">0.905</td></tr>
    </table>
    <div class="find">图特征提升 +0.001，行为特征已覆盖绝大部分信号。</div>
    <img class="plot" src="data/graph_augmentation_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[09][15] GNN 事后 vs 事前 <span class="tag done">Done</span></summary>
  <div class="body">
    <div class="warn find">ArtemisNet 事后 AUC 0.976，事前 T-30 只有 0.586。GNN 依赖空投后才产生的 transfer edge，事前图是残缺的。</div>
  </div>
  </details>

</details>

<details>
<summary class="q">模型靠谱吗？</summary>

  <details>
  <summary>[08] 时间泛化 + 种群泛化 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>实验</th><th>AUC</th></tr>
      <tr><td>标准 5-fold (T-30)</td><td class="hi">0.904</td></tr>
      <tr><td>时间泛化 (T-90 训练, T-30 测试)</td><td class="hi">0.898</td></tr>
      <tr><td>种群泛化 (50% 未见 sybil)</td><td class="mid">0.744</td></tr>
    </table>
    <img class="plot" src="data/generalization_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[05] Precision-Recall 阈值分析 <span class="tag done">Done</span></summary>
  <div class="body">
    <img class="plot" src="data/pr_and_comparison_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[22] 概率校准 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>模型</th><th>AUC</th><th>Brier Score</th></tr>
      <tr><td>原始</td><td>0.905</td><td class="lo">0.120</td></tr>
      <tr><td>Isotonic 校准</td><td>0.905</td><td class="hi">0.091</td></tr>
    </table>
    <div class="find">校准后 Brier Score -24%，部署时概率更可信。</div>
    <img class="plot" src="data/calibration_curve.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[11] Sybil 内部聚类 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>类型</th><th>数量</th><th>买入次数</th><th>Blend操作</th></tr>
      <tr><td>散户猎人</td><td>49,039</td><td>8</td><td>0</td></tr>
      <tr><td>中量猎人</td><td>601</td><td>794</td><td>0</td></tr>
      <tr><td>超级机器人</td><td>6</td><td class="hi">9,099</td><td class="hi">4,248</td></tr>
    </table>
    <img class="plot" src="data/sybil_clustering_plot.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[20] 聚类 K 值选择 <span class="tag done">Done</span></summary>
  <div class="body">
    <div class="note find">Silhouette 最优 K=2 (0.984)，但 K=3 是 Inertia 拐点且语义更清晰，选 K=3。</div>
    <img class="plot" src="data/clustering_k_selection.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[21] 按 Sybil 类型留一法泛化 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>留出类型</th><th>测试 sybil 数</th><th>AUC</th></tr>
      <tr><td>BW（大额买入）</td><td>12,428</td><td class="lo">0.047</td></tr>
      <tr><td>FD（刷后抛售）</td><td>14,166</td><td class="lo">0.110</td></tr>
      <tr><td>ML（市场循环）</td><td>1,818</td><td class="lo">0.241</td></tr>
      <tr><td>HF（高频小额）</td><td>1,704</td><td class="mid">0.550</td></tr>
    </table>
    <div class="warn find">移除 BW 后 AUC 0.047，每种 sybil 类型行为指纹完全不同，跨类型泛化极差。</div>
    <img class="plot" src="data/flag_type_generalization.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[13][23] 对抗鲁棒性 + 逃避成本 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>Diversity 降低</th><th>AUC</th><th>积分保留</th></tr>
      <tr><td>0%</td><td class="hi">0.904</td><td>100%</td></tr>
      <tr><td>30%</td><td>0.903</td><td>83.7%</td></tr>
      <tr><td>70%</td><td>0.901</td><td>55.0%</td></tr>
      <tr><td>90%</td><td>0.899</td><td>32.8%</td></tr>
    </table>
    <div class="find">降 90% diversity，AUC 只降 0.6%，但积分损失 67%。逃避检测在经济上不合算。</div>
    <img class="plot" src="data/adversarial_cost_tradeoff.png" onclick="openLightbox(this)">
  </div>
  </details>

</details>

<details>
<summary class="q">能推广到其他协议吗？</summary>

  <details>
  <summary>[14][16b] Blur → Hop 迁移 <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>训练</th><th>AUC</th><th>P@1000</th></tr>
      <tr><td>Blur only（零样本）</td><td class="lo">0.500</td><td>0.055</td></tr>
      <tr><td>Blur + 1% Hop</td><td class="hi">0.982</td><td>0.958</td></tr>
      <tr><td>Blur + 20% Hop</td><td class="hi">0.981</td><td>0.955</td></tr>
    </table>
    <div class="find">零样本失败，1% Hop 标注（约 300 个样本）后跳到 0.982。</div>
  </div>
  </details>

  <details>
  <summary>[16] 三协议 LOPO（专属特征）<span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>训练</th><th>测试</th><th>AUC</th></tr>
      <tr><td>hop+gitcoin</td><td>blur</td><td class="lo">0.220</td></tr>
      <tr><td>blur+gitcoin</td><td>hop</td><td class="lo">0.376</td></tr>
      <tr><td>blur+hop</td><td>gitcoin</td><td class="lo">0.466</td></tr>
    </table>
    <div class="warn find">跨协议 AUC 0.22-0.47，初步以为行为规律不通用，后发现是特征集不匹配导致。</div>
  </div>
  </details>

  <details>
  <summary>[17] 公共特征集 LOPO <span class="tag done">Done</span></summary>
  <div class="body">
    <table>
      <tr><th>测试</th><th>专属特征</th><th>公共特征</th><th>变化</th></tr>
      <tr><td>blur</td><td class="lo">0.220</td><td class="hi">0.624</td><td class="hi">+40%</td></tr>
      <tr><td>hop</td><td class="lo">0.376</td><td class="hi">0.780</td><td class="hi">+40%</td></tr>
      <tr><td>gitcoin</td><td class="lo">0.466</td><td class="mid">0.468</td><td>持平</td></tr>
    </table>
    <div class="find">Blur-Hop 零样本从 0.38 → 0.78，之前的低 AUC 主要是特征不匹配。Gitcoin 持平因行为维度本质不同。</div>
  </div>
  </details>

  <details>
  <summary>[18] Gitcoin 域内为何只有 0.599 <span class="tag done">Done</span></summary>
  <div class="body">
    <div class="warn find">gitcoin_donations 重要性 0%，无预测力。Gitcoin 的 SADScore 标注的是链上行为异常，不是 Gitcoin 特定刷量行为，所以域内 AUC 低是数据标注定义问题。</div>
    <img class="plot" src="data/gitcoin_shap.png" onclick="openLightbox(this)">
  </div>
  </details>

  <details>
  <summary>[WIP] LayerZero 第四协议 <span class="tag wip">采集中 ~15K/30K</span></summary>
  <div class="body">
    ETH / ARB / POLY 三链，29,849 个地址，ETA ~2h。完成后跑 exp 24（同类桥接协议间迁移）。
  </div>
  </details>

</details>

</div>

<div class="col-paper">
<h2>论文章节对应</h2>
<div class="ps"><div class="ps-title">1. Introduction</div><div class="ps-body">问题定义：事后检测无法预防</div><div class="ps-pills"><span class="pill">[02]</span></div></div>
<div class="ps"><div class="ps-title">2. Background</div><div class="ps-body">Blur S2 积分机制；ARTEMIS 综述；sybil 分类</div><div class="ps-pills"><span class="pill">[11]</span><span class="pill">[21]</span></div></div>
<div class="ps"><div class="ps-title">3. Method</div><div class="ps-body">时间截断特征提取；18 特征设计；LightGBM 流程</div><div class="ps-pills"><span class="pill">[01]</span><span class="pill">[02]</span></div></div>
<div class="ps"><div class="ps-title">4. Experiments</div><div class="ps-body">主结果 / 消融 / 特征分析 / 泛化 / 跨协议</div><div class="ps-pills"><span class="pill">[02]</span><span class="pill">[03]</span><span class="pill">[04]</span><span class="pill">[06]</span><span class="pill">[07]</span><span class="pill">[08]</span><span class="pill">[10]</span><span class="pill">[12]</span><span class="pill">[14]</span><span class="pill">[16]</span><span class="pill">[17]</span><span class="pill">[20]</span><span class="pill">[21]</span></div></div>
<div class="ps"><div class="ps-title">5. Discussion</div><div class="ps-body">GNN 事前失效原因；Gitcoin 标注问题；逃避成本；局限性</div><div class="ps-pills"><span class="pill">[09][15]</span><span class="pill">[18]</span><span class="pill">[23]</span><span class="pill">[22]</span></div></div>
<div class="ps"><div class="ps-title">6. Conclusion</div><div class="ps-body">主结论；LayerZero 扩展；未来方向</div><div class="ps-pills"><span class="pill">[WIP]</span><span class="pill">[19]</span></div></div>
<hr style="border:none;border-top:1px solid var(--border);margin:12px 0;">
<h2>状态</h2>
<div style="font-size:12px;color:var(--text3);line-height:2.2;">
  <span class="pill" style="background:#1a3a1a;color:var(--green);">Done</span> 01-23 全部完成<br>
  <span class="pill" style="background:#3a2a00;color:var(--yellow);">WIP</span> LayerZero 采集中<br>
  <span class="pill" style="background:#2a1a2a;color:var(--purple);">Next</span> Exp 24 LayerZero LOPO
</div>
</div>
</div>

<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <img id="lightbox-img" src="">
</div>

<script>
function setAll(o){document.querySelectorAll('details').forEach(d=>d.open=o);}
function toggleTheme(){const c=document.documentElement.getAttribute('data-theme');document.documentElement.setAttribute('data-theme',c==='light'?'':'light');}
function openLightbox(img){document.getElementById('lightbox-img').src=img.src;document.getElementById('lightbox').classList.add('open');event.stopPropagation();}
function closeLightbox(){document.getElementById('lightbox').classList.remove('open');}
function doSearch(q){q=q.trim().toLowerCase();document.querySelectorAll('details').forEach(d=>{d.style.display=(!q||d.innerText.toLowerCase().includes(q))?'':'none';if(q&&d.innerText.toLowerCase().includes(q))d.open=true;});}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeLightbox();});
</script>
</body>
</html>
